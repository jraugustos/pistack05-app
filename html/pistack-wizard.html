<html lang="pt-BR"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Novo Projeto â€” PIStack</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        
        @keyframes typing {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideInLeft {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }
        
        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(20px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateX(0) scale(1);
            }
        }
        
        .message-bot {
            animation: slideInLeft 0.4s ease-out;
        }
        
        .message-user {
            animation: slideInRight 0.3s ease-out;
        }
        
        .typing-indicator span {
            animation: typing 1.4s infinite;
        }
        
        .typing-indicator span:nth-child(2) {
            animation-delay: 0.2s;
        }
        
        .typing-indicator span:nth-child(3) {
            animation-delay: 0.4s;
        }
    </style>
</head>
<body class="bg-[#0A0B0E] text-[#E6E9F2] antialiased">
    <!-- Header -->
    <header class="fixed top-0 left-0 right-0 z-50 border-b border-white/5 bg-[#0F1115]/80 backdrop-blur-xl">
        <nav class="h-14 px-4 md:px-6 flex items-center justify-between max-w-[1600px] mx-auto">
            <div class="flex items-center gap-4">
                <button onclick="window.history.back()" class="w-8 h-8 flex items-center justify-center hover:bg-white/5 rounded-lg transition-colors">
                    <i data-lucide="arrow-left" class="w-4 h-4"></i>
                </button>
                <div class="text-base font-semibold tracking-tight">PIStack</div>
            </div>
            <div class="flex items-center gap-2">
                <div class="text-xs text-[#E6E9F2]/40 hidden sm:block">Novo Projeto</div>
            </div>
        </nav>
    </header>

    <!-- Main Content -->
    <main class="pt-14 min-h-screen flex flex-col">
        <!-- Progress Bar (Optional) -->
        <div class="h-1 bg-white/5">
            <div id="progressBar" class="h-full bg-gradient-to-r from-[#7AA2FF] to-[#5AD19A] transition-all duration-500" style="width: 20%"></div>
        </div>

        <!-- Chat Container -->
        <div class="flex-1 flex flex-col max-w-[800px] w-full mx-auto px-4 md:px-6">
            <!-- Messages Area -->
            <div id="messagesContainer" class="flex-1 py-8 space-y-6 overflow-y-auto">
                <!-- Bot Welcome Message -->
                <div class="flex gap-3 message-bot">
                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-[#7AA2FF]/20 to-[#5AD19A]/20 border border-[#7AA2FF]/30 flex items-center justify-center flex-shrink-0">
                        <i data-lucide="sparkles" class="w-4 h-4 text-[#7AA2FF]"></i>
                    </div>
                    <div class="flex-1">
                        <div class="bg-[#151821] border border-white/10 rounded-2xl rounded-tl-sm px-4 py-3 inline-block max-w-[90%]">
                            <p class="text-sm leading-relaxed">OlÃ¡! ðŸ‘‹ Vou te ajudar a criar seu novo projeto.</p>
                            <p class="text-sm leading-relaxed mt-2">Vamos transformar sua ideia em um plano executÃ¡vel atravÃ©s de algumas perguntas simples. Pronto para comeÃ§ar?</p>
                        </div>
                        <div class="flex gap-2 mt-3">
                            <button onclick="startFlow()" class="px-4 py-2 bg-[#7AA2FF] hover:bg-[#6690E8] text-white rounded-lg text-sm font-medium transition-colors">
                                Sim, vamos lÃ¡! ðŸš€
                            </button>
                            <button onclick="cancelFlow()" class="px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-sm font-medium transition-colors">
                                Cancelar
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Input Area -->
            <div id="inputArea" class="py-4 border-t border-white/5 hidden">
                <div class="flex gap-3">
                    <input id="messageInput" type="text" placeholder="Digite sua resposta..." class="flex-1 px-4 py-3 bg-[#151821] border border-white/10 rounded-xl text-sm placeholder:text-[#E6E9F2]/40 focus:outline-none focus:border-[#7AA2FF]/50 focus:ring-2 focus:ring-[#7AA2FF]/20 transition-all">
                    <button class="px-6 py-3 bg-[#7AA2FF] hover:bg-[#6690E8] text-white rounded-xl text-sm font-medium transition-colors flex items-center gap-2">
                        <span>Enviar</span>
                        <i data-lucide="send" class="w-4 h-4"></i>
                    </button>
                </div>
            </div>
        </div>
    </main>

    <script>
        lucide.createIcons();

        let currentStep = 'welcome';
        let projectData = {
            template: null,
            description: '',
            name: ''
        };

        const templates = [
            {
                id: 'website',
                icon: 'globe',
                title: 'Site/App',
                description: 'Landing pages, e-commerce, dashboards',
                features: ['Design responsivo', 'Sistema de autenticaÃ§Ã£o', 'Painel administrativo', 'IntegraÃ§Ã£o com banco de dados']
            },
            {
                id: 'mobile',
                icon: 'smartphone',
                title: 'Mobile App',
                description: 'iOS/Android, apps nativos e hÃ­bridos',
                features: ['Interface nativa', 'Push notifications', 'IntegraÃ§Ã£o com APIs', 'Funcionalidades offline']
            },
            {
                id: 'api',
                icon: 'plug',
                title: 'API/Service',
                description: 'Backend, microserviÃ§os, integraÃ§Ãµes',
                features: ['Arquitetura REST/GraphQL', 'AutenticaÃ§Ã£o JWT', 'DocumentaÃ§Ã£o automÃ¡tica', 'Rate limiting']
            },
            {
                id: 'landing',
                icon: 'target',
                title: 'Landing Page',
                description: 'PÃ¡ginas de conversÃ£o, marketing',
                features: ['OtimizaÃ§Ã£o SEO', 'FormulÃ¡rios de captura', 'Analytics integrado', 'A/B testing']
            }
        ];

        function scrollToBottom() {
            const container = document.getElementById('messagesContainer');
            setTimeout(() => {
                container.scrollTo({
                    top: container.scrollHeight,
                    behavior: 'smooth'
                });
            }, 100);
        }

        function updateProgress(percent) {
            document.getElementById('progressBar').style.width = percent + '%';
        }

        function addBotMessage(html, delay = 1000) {
            return new Promise((resolve) => {
                const container = document.getElementById('messagesContainer');
                
                // Add typing indicator
                const typingDiv = document.createElement('div');
                typingDiv.className = 'flex gap-3 message-bot';
                typingDiv.id = 'typing-indicator';
                typingDiv.innerHTML = `
                    <div class="w-8 h-8 rounded-full bg-gradient-to-br from-[#7AA2FF]/20 to-[#5AD19A]/20 border border-[#7AA2FF]/30 flex items-center justify-center flex-shrink-0">
                        <i data-lucide="sparkles" class="w-4 h-4 text-[#7AA2FF]"></i>
                    </div>
                    <div class="bg-[#151821] border border-white/10 rounded-2xl rounded-tl-sm px-4 py-3">
                        <div class="typing-indicator flex gap-1">
                            <span class="w-2 h-2 bg-[#E6E9F2]/40 rounded-full"></span>
                            <span class="w-2 h-2 bg-[#E6E9F2]/40 rounded-full"></span>
                            <span class="w-2 h-2 bg-[#E6E9F2]/40 rounded-full"></span>
                        </div>
                    </div>
                `;
                container.appendChild(typingDiv);
                lucide.createIcons();
                scrollToBottom();

                setTimeout(() => {
                    typingDiv.remove();
                    
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'flex gap-3 message-bot';
                    messageDiv.innerHTML = `
                        <div class="w-8 h-8 rounded-full bg-gradient-to-br from-[#7AA2FF]/20 to-[#5AD19A]/20 border border-[#7AA2FF]/30 flex items-center justify-center flex-shrink-0">
                            <i data-lucide="sparkles" class="w-4 h-4 text-[#7AA2FF]"></i>
                        </div>
                        <div class="flex-1">
                            ${html}
                        </div>
                    `;
                    container.appendChild(messageDiv);
                    lucide.createIcons();
                    scrollToBottom();
                    resolve();
                }, delay);
            });
        }

        function addUserMessage(text) {
            const container = document.getElementById('messagesContainer');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'flex gap-3 justify-end message-user';
            messageDiv.innerHTML = `
                <div class="bg-gradient-to-r from-[#7AA2FF] to-[#6690E8] rounded-2xl rounded-tr-sm px-4 py-3 max-w-[80%]">
                    <p class="text-sm text-white leading-relaxed">${text}</p>
                </div>
            `;
            container.appendChild(messageDiv);
            scrollToBottom();
        }

        async function startFlow() {
            addUserMessage('Sim, vamos lÃ¡! ðŸš€');
            updateProgress(40);
            
            await addBotMessage(`
                <div class="bg-[#151821] border border-white/10 rounded-2xl rounded-tl-sm px-4 py-3 inline-block max-w-[90%]">
                    <p class="text-sm leading-relaxed mb-3">Ã“timo! Primeiro, qual tipo de projeto vocÃª quer criar?</p>
                    <p class="text-xs text-[#E6E9F2]/60">Escolha o template que melhor se encaixa:</p>
                </div>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 mt-4">
                    ${templates.map(t => `
                        <button onclick="selectTemplate('${t.id}')" class="bg-[#151821] border border-white/10 hover:border-[#7AA2FF]/50 hover:scale-[1.02] rounded-xl p-4 transition-all text-left group">
                            <div class="flex items-start gap-3">
                                <div class="w-10 h-10 rounded-lg bg-[#7AA2FF]/10 border border-[#7AA2FF]/20 flex items-center justify-center flex-shrink-0 group-hover:bg-[#7AA2FF]/20 transition-colors">
                                    <i data-lucide="${t.icon}" class="w-5 h-5 text-[#7AA2FF]"></i>
                                </div>
                                <div class="flex-1 min-w-0">
                                    <div class="text-sm font-semibold mb-1">${t.title}</div>
                                    <div class="text-xs text-[#E6E9F2]/60">${t.description}</div>
                                </div>
                            </div>
                        </button>
                    `).join('')}
                </div>
            `, 800);
        }

        async function selectTemplate(templateId) {
            const template = templates.find(t => t.id === templateId);
            projectData.template = template;
            
            addUserMessage(template.title);
            updateProgress(60);
            
            await addBotMessage(`
                <div class="bg-[#151821] border border-white/10 rounded-2xl rounded-tl-sm px-4 py-3 inline-block max-w-[90%]">
                    <p class="text-sm leading-relaxed mb-3">Perfeito! O template <strong>${template.title}</strong> inclui:</p>
                    <ul class="space-y-2">
                        ${template.features.map(f => `
                            <li class="text-xs text-[#E6E9F2]/80 flex items-start gap-2">
                                <i data-lucide="check" class="w-3.5 h-3.5 text-[#5AD19A] flex-shrink-0 mt-0.5"></i>
                                <span>${f}</span>
                            </li>
                        `).join('')}
                    </ul>
                </div>
                <div class="flex gap-2 mt-3">
                    <button onclick="confirmTemplate()" class="px-4 py-2 bg-[#7AA2FF] hover:bg-[#6690E8] text-white rounded-lg text-sm font-medium transition-colors">
                        Confirmar template
                    </button>
                    <button onclick="startFlow()" class="px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-sm font-medium transition-colors">
                        Escolher outro
                    </button>
                </div>
            `);
        }

        async function confirmTemplate() {
            addUserMessage('Confirmar template');
            updateProgress(70);
            
            await addBotMessage(`
                <div class="bg-[#151821] border border-white/10 rounded-2xl rounded-tl-sm px-4 py-3 inline-block max-w-[90%]">
                    <p class="text-sm leading-relaxed mb-3">Agora me conte: qual Ã© a sua ideia? Descreva o que vocÃª quer construir.</p>
                    <p class="text-xs text-[#E6E9F2]/60">Isso me ajuda a entender melhor seu projeto e criar um plano mais adequado.</p>
                </div>
                <div class="mt-4 bg-[#151821] border border-white/10 rounded-xl p-3">
                    <textarea 
                        id="descriptionInput"
                        placeholder="Ex: Um app para gerenciar finanÃ§as pessoais com categorizaÃ§Ã£o automÃ¡tica de gastos..."
                        class="w-full bg-transparent text-sm placeholder:text-[#E6E9F2]/40 focus:outline-none resize-none"
                        rows="4"
                        maxlength="500"
                        oninput="updateCharCount(this)"
                    ></textarea>
                    <div class="flex items-center justify-between pt-2 border-t border-white/5 mt-2">
                        <span id="charCount" class="text-xs text-[#E6E9F2]/40">0 / 500</span>
                        <div class="flex gap-2">
                            <button onclick="skipDescription()" class="px-3 py-1.5 text-xs text-[#E6E9F2]/60 hover:text-[#E6E9F2] transition-colors">
                                Pular
                            </button>
                            <button onclick="submitDescription()" class="px-4 py-1.5 bg-[#7AA2FF] hover:bg-[#6690E8] text-white rounded-lg text-xs font-medium transition-colors">
                                Continuar
                            </button>
                        </div>
                    </div>
                </div>
            `);
        }

        function updateCharCount(textarea) {
            const count = textarea.value.length;
            const counter = document.getElementById('charCount');
            counter.textContent = `${count} / 500`;
            counter.className = count > 450 ? 'text-xs text-[#FF6B6B]' : 'text-xs text-[#E6E9F2]/40';
        }

        async function submitDescription() {
            const description = document.getElementById('descriptionInput').value.trim();
            if (!description) {
                skipDescription();
                return;
            }
            
            projectData.description = description;
            addUserMessage(description);
            updateProgress(85);
            
            await addBotMessage(`
                <div class="bg-[#151821] border border-white/10 rounded-2xl rounded-tl-sm px-4 py-3 inline-block max-w-[90%]">
                    <p class="text-sm leading-relaxed mb-3">Entendi! Vou trabalhar com essa ideia:</p>
                    <div class="bg-[#7AA2FF]/5 border border-[#7AA2FF]/20 rounded-lg px-3 py-2">
                        <p class="text-xs text-[#E6E9F2]/90 italic">"${description}"</p>
                    </div>
                </div>
                <div class="flex gap-2 mt-3">
                    <button onclick="askProjectName()" class="px-4 py-2 bg-[#7AA2FF] hover:bg-[#6690E8] text-white rounded-lg text-sm font-medium transition-colors">
                        Perfeito!
                    </button>
                    <button onclick="confirmTemplate()" class="px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-sm font-medium transition-colors">
                        Editar descriÃ§Ã£o
                    </button>
                </div>
            `);
        }

        async function skipDescription() {
            addUserMessage('Pular etapa');
            updateProgress(85);
            await askProjectName();
        }

        async function askProjectName() {
            await addBotMessage(`
                <div class="bg-[#151821] border border-white/10 rounded-2xl rounded-tl-sm px-4 py-3 inline-block max-w-[90%]">
                    <p class="text-sm leading-relaxed mb-3">Quase lÃ¡! Qual nome vocÃª quer dar para o seu projeto?</p>
                    ${projectData.description ? `
                        <p class="text-xs text-[#E6E9F2]/60 mb-2">Algumas sugestÃµes baseadas na sua descriÃ§Ã£o:</p>
                        <div class="flex flex-wrap gap-2 mb-3">
                            <button onclick="selectSuggestedName('FinControl')" class="px-3 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-xs transition-colors">
                                FinControl
                            </button>
                            <button onclick="selectSuggestedName('SmartFinance')" class="px-3 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-xs transition-colors">
                                SmartFinance
                            </button>
                            <button onclick="selectSuggestedName('MoneyFlow')" class="px-3 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-xs transition-colors">
                                MoneyFlow
                            </button>
                        </div>
                    ` : ''}
                </div>
                <div class="mt-4 bg-[#151821] border border-white/10 rounded-xl p-3">
                    <input 
                        id="nameInput"
                        type="text"
                        placeholder="Nome do projeto"
                        class="w-full bg-transparent text-sm placeholder:text-[#E6E9F2]/40 focus:outline-none"
                        minlength="3"
                        maxlength="100"
                        oninput="validateProjectName(this)"
                    />
                    <div class="flex items-center justify-between pt-2 border-t border-white/5 mt-2">
                        <span id="nameValidation" class="text-xs text-[#E6E9F2]/40">MÃ­nimo 3 caracteres</span>
                        <button onclick="submitProjectName()" id="submitNameBtn" disabled class="px-4 py-1.5 bg-[#7AA2FF]/50 text-white rounded-lg text-xs font-medium cursor-not-allowed">
                            Criar projeto
                        </button>
                    </div>
                </div>
            `);
        }

        function selectSuggestedName(name) {
            document.getElementById('nameInput').value = name;
            validateProjectName(document.getElementById('nameInput'));
        }

        function validateProjectName(input) {
            const value = input.value.trim();
            const validation = document.getElementById('nameValidation');
            const submitBtn = document.getElementById('submitNameBtn');
            
            if (value.length === 0) {
                validation.textContent = 'MÃ­nimo 3 caracteres';
                validation.className = 'text-xs text-[#E6E9F2]/40';
                submitBtn.disabled = true;
                submitBtn.className = 'px-4 py-1.5 bg-[#7AA2FF]/50 text-white rounded-lg text-xs font-medium cursor-not-allowed';
            } else if (value.length < 3) {
                validation.textContent = `Faltam ${3 - value.length} caracteres`;
                validation.className = 'text-xs text-[#FF6B6B]';
                submitBtn.disabled = true;
                submitBtn.className = 'px-4 py-1.5 bg-[#7AA2FF]/50 text-white rounded-lg text-xs font-medium cursor-not-allowed';
            } else {
                validation.textContent = 'âœ“ Nome vÃ¡lido';
                validation.className = 'text-xs text-[#5AD19A]';
                submitBtn.disabled = false;
                submitBtn.className = 'px-4 py-1.5 bg-[#7AA2FF] hover:bg-[#6690E8] text-white rounded-lg text-xs font-medium transition-colors cursor-pointer';
            }
        }

        async function submitProjectName() {
            const name = document.getElementById('nameInput').value.trim();
            if (name.length < 3) return;
            
            projectData.name = name;
            addUserMessage(name);
            updateProgress(95);
            
            await addBotMessage(`
                <div class="bg-[#151821] border border-white/10 rounded-2xl rounded-tl-sm px-4 py-3 inline-block max-w-[90%]">
                    <p class="text-sm leading-relaxed mb-3">Perfeito! Aqui estÃ¡ o resumo do seu projeto:</p>
                    <div class="bg-white/5 border border-white/10 rounded-lg p-3 space-y-3">
                        <div>
                            <div class="text-xs text-[#E6E9F2]/60 mb-1">Nome</div>
                            <div class="text-sm font-medium">${projectData.name}</div>
                        </div>
                        <div class="h-px bg-white/5"></div>
                        <div>
                            <div class="text-xs text-[#E6E9F2]/60 mb-1">Template</div>
                            <div class="text-sm font-medium">${projectData.template.title}</div>
                        </div>
                        ${projectData.description ? `
                            <div class="h-px bg-white/5"></div>
                            <div>
                                <div class="text-xs text-[#E6E9F2]/60 mb-1">DescriÃ§Ã£o</div>
                                <div class="text-sm">${projectData.description}</div>
                            </div>
                        ` : ''}
                    </div>
                </div>
                <div class="flex gap-2 mt-3">
                    <button onclick="createProject()" class="px-4 py-2 bg-[#7AA2FF] hover:bg-[#6690E8] text-white rounded-lg text-sm font-medium transition-colors flex items-center gap-2">
                        <i data-lucide="check" class="w-4 h-4"></i>
                        Confirmar e criar
                    </button>
                    <button onclick="startFlow()" class="px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg text-sm font-medium transition-colors">
                        RecomeÃ§ar
                    </button>
                </div>
            `);
        }

        async function createProject() {
            addUserMessage('Confirmar e criar');
            updateProgress(100);
            
            await addBotMessage(`
                <div class="bg-[#151821] border border-white/10 rounded-2xl rounded-tl-sm px-4 py-3 inline-block">
                    <div class="flex items-center gap-3">
                        <div class="w-8 h-8 rounded-full bg-[#7AA2FF]/20 flex items-center justify-center">
                            <div class="w-4 h-4 border-2 border-[#7AA2FF] border-t-transparent rounded-full animate-spin"></div>
                        </div>
                        <div>
                            <p class="text-sm font-medium">Criando seu projeto...</p>
                            <p class="text-xs text-[#E6E9F2]/60 mt-0.5">Configurando estrutura e funcionalidades</p>
                        </div>
                    </div>
                </div>
            `, 500);

            setTimeout(async () => {
                await addBotMessage(`
                    <div class="bg-gradient-to-br from-[#5AD19A]/10 to-[#7AA2FF]/10 border border-[#5AD19A]/30 rounded-2xl rounded-tl-sm px-4 py-3 inline-block">
                        <div class="flex items-start gap-3">
                            <div class="w-10 h-10 rounded-full bg-[#5AD19A]/20 flex items-center justify-center flex-shrink-0">
                                <i data-lucide="check-circle" class="w-5 h-5 text-[#5AD19A]"></i>
                            </div>
                            <div>
                                <p class="text-sm font-medium mb-1">Projeto criado com sucesso! ðŸŽ‰</p>
                                <p class="text-xs text-[#E6E9F2]/80">Redirecionando para o canvas...</p>
                            </div>
                        </div>
                    </div>
                `, 800);

                setTimeout(() => {
                    window.location.href = '/projects/' + projectData.name.toLowerCase().replace(/\s+/g, '-');
                }, 1500);
            }, 2000);
        }

        function cancelFlow() {
            if (confirm('Tem certeza que deseja cancelar? As informaÃ§Ãµes nÃ£o serÃ£o salvas.')) {
                window.location.href = '/projects';
            }
        }
    </script>

</body></html>